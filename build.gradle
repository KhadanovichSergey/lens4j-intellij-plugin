plugins {
    id 'java'
    id "io.freefair.lombok" version "6.2.0"
    id 'org.jetbrains.intellij' version '0.7.3'
}

group 'dev.khbd.lens4j'
version '0.1.0'

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

repositories {
    mavenCentral()
}

dependencies {
    implementation 'dev.khbd.lens4j:lens4j-core:0.1.2'

    testImplementation group: 'org.testng', name: 'testng', version: '6.13.1'
    testImplementation group: 'org.assertj', name: 'assertj-core', version: '3.9.0'
}

intellij {
    version = "2021.2.1"
    plugins = ['com.intellij.java']
}

test {
    useTestNG()
}

patchPluginXml {
    changeNotes = loadHtml("change-notes.html")
    description = loadHtml("description.html")
}

def loadHtml(String fileName) {
    file(fileName).text.replace('<html>', '').replace('</html>', '')
}